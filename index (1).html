<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Festival 2026 - Playlist Creator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        /*
         * SPOTIFY SETUP INSTRUCTIONS:
         * 
         * To enable Spotify playlist creation, you need a Spotify Client ID:
         * 
         * 1. Go to https://developer.spotify.com/dashboard
         * 2. Log in with your Spotify account
         * 3. Click "Create app"
         * 4. Fill in:
         *    - App name: "Download Festival Playlist Creator"
         *    - App description: "Creates playlists from festival lineups"
         *    - Redirect URI: The URL where this HTML file is hosted
         * 5. Check the Terms of Service box and click "Save"
         * 6. Copy your Client ID
         * 7. Replace 'YOUR_SPOTIFY_CLIENT_ID' below with your actual Client ID
         */

        const DownloadFestivalSelector = () => {
            const [selectedBands, setSelectedBands] = useState(new Set());
            const [isGenerating, setIsGenerating] = useState(false);
            const [showInstructions, setShowInstructions] = useState(false);
            const [processingStatus, setProcessingStatus] = useState('');
            const [collectedSongs, setCollectedSongs] = useState([]);
            const [spotifyAccessToken, setSpotifyAccessToken] = useState(null);
            const [spotifyUserId, setSpotifyUserId] = useState(null);
            const [playlistUrl, setPlaylistUrl] = useState(null);
            const [spotifyClientId, setSpotifyClientId] = useState(localStorage.getItem('spotifyClientId') || '');

            // Spotify OAuth configuration
            const SPOTIFY_REDIRECT_URI = window.location.origin + window.location.pathname;
            const SPOTIFY_SCOPES = 'playlist-modify-public playlist-modify-private';
            
            const saveSpotifyClientId = (clientId) => {
                setSpotifyClientId(clientId);
                localStorage.setItem('spotifyClientId', clientId);
                alert('Spotify Client ID saved! You can now connect your Spotify account.');
            };

            const headliners = ['Limp Bizkit', 'Guns N\' Roses', 'Linkin Park'];
            
            // Hardcoded top 10 most played live songs for each band
            const bandSongsData = {
                'Limp Bizkit': [
                    'Break Stuff',
                    'Faith',
                    'Take a Look Around',
                    'Nookie',
                    'My Generation',
                    'My Way',
                    'Hot Dog',
                    'Rollin\' (Air Raid Vehicle)',
                    'Livin\' It Up',
                    'Re-Arranged'
                ],
                'Guns N\' Roses': [
                    'Welcome to the Jungle',
                    'Mr. Brownstone',
                    'Knockin\' on Heaven\'s Door',
                    'Paradise City',
                    'Sweet Child o\' Mine',
                    'It\'s So Easy',
                    'Live and Let Die',
                    'Nightrain',
                    'November Rain',
                    'You Could Be Mine'
                ]
            };
            
            const mainStage = [
                'Bad Omens', 'Cypress Hill', 'Trivium', 'Architects',
                'Electric Callboy', 'Halestorm', 'Ice Nine Kills', 'Babymetal',
                'Pendulum', 'The Pretty Reckless', 'Black Veil Brides', 'Behemoth',
                'Mastodon', 'The All-American Rejects', 'Feeder',
                'Chaos A.D.', 'Static-X', 'Blood Incantation'
            ];

            const midTier = [
                'Ash', 'Bloodywood', 'Bush', 'Dogstar', 'Hollywood Undead', 'Imminence',
                'Kublai Khan TX', 'Landmvrks', 'Letlive', 'Mammoth', 'Paleface Swiss',
                'Periphery', 'P.O.D.', 'Rory', 'Scene Queen', 'Set It Off', 'Sleep Theory',
                'Social Distortion', 'Story of the Year', 'South Arcade', 'The Plot In You',
                'Thornhill', 'Those Damn Crows', 'Thrown', 'Tom Morello', 'We Came As Romans'
            ];

            const smallerBands = [
                'Ankor', 'As Everything Unfolds', 'As It Is', 'Boundaries', 'Catch Your Breath',
                'Corrosion of Conformity', 'Decapitated', 'Die Spitz', 'Dinosaur Pile-Up',
                'Drain', 'Drowning Pool', 'Ego Kill Talent', 'Elder', 'Gatecreeper',
                'Headcrack', 'Kal Marks', 'IURI', 'James and the Cold Gun', 'Lake Malice',
                'Lakegold', 'Last Train', 'Loathe', 'Magnolia Park', 'Melrose', 'Mouth Culture',
                'Nasty', 'Native James', 'Nevertel', 'Pussyliquor', 'Rain City Drive',
                'Return to Dust', 'Self Deception', 'Silent Planet', 'Slay Squad', 'Snot',
                'Spineshank', 'Spitting Glass', 'Sweet Pill', 'Sweet Savage', 'Tailgunner',
                'The Pretty Wild', 'Tropic Gold', 'TX2', 'Unpeople', 'Vianova', 'Wayside', 'Zero 9:36'
            ];

            // Check for Spotify callback
            useEffect(() => {
                const hash = window.location.hash;
                if (hash) {
                    const params = new URLSearchParams(hash.substring(1));
                    const token = params.get('access_token');
                    if (token) {
                        setSpotifyAccessToken(token);
                        window.location.hash = '';
                        fetchSpotifyUserId(token);
                    }
                }
            }, []);

            const fetchSpotifyUserId = async (token) => {
                try {
                    const response = await fetch('https://api.spotify.com/v1/me', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const data = await response.json();
                    setSpotifyUserId(data.id);
                } catch (error) {
                    console.error('Error fetching Spotify user ID:', error);
                }
            };

            const connectSpotify = () => {
                if (!spotifyClientId || spotifyClientId.trim() === '') {
                    alert('Please enter your Spotify Client ID first!');
                    return;
                }
                const authUrl = `https://accounts.spotify.com/authorize?client_id=${spotifyClientId}&response_type=token&redirect_uri=${encodeURIComponent(SPOTIFY_REDIRECT_URI)}&scope=${encodeURIComponent(SPOTIFY_SCOPES)}`;
                window.location.href = authUrl;
            };

            const toggleBand = (band) => {
                const newSelected = new Set(selectedBands);
                if (newSelected.has(band)) {
                    newSelected.delete(band);
                } else {
                    newSelected.add(band);
                }
                setSelectedBands(newSelected);
            };

            const generatePlaylist = async () => {
                if (selectedBands.size === 0) {
                    alert('Please select at least one band!');
                    return;
                }
                
                setIsGenerating(true);
                setShowInstructions(true);
                setProcessingStatus('Collecting songs...');
                
                const allSongs = [];
                const bandsArray = Array.from(selectedBands);
                
                try {
                    for (let i = 0; i < bandsArray.length; i++) {
                        const band = bandsArray[i];
                        setProcessingStatus(`Getting top 10 songs for ${band} (${i + 1}/${bandsArray.length})...`);
                        
                        // Check if we have song data for this band
                        if (bandSongsData[band]) {
                            const songs = bandSongsData[band];
                            allSongs.push({ band, songs });
                            setProcessingStatus(`âœ“ Got ${songs.length} songs from ${band}`);
                        } else {
                            setProcessingStatus(`âš  No song data available for ${band} yet`);
                            allSongs.push({ band, songs: [], error: 'Song data not yet available for this band' });
                        }
                        
                        await new Promise(resolve => setTimeout(resolve, 300));
                    }
                    
                    setCollectedSongs(allSongs);
                    const totalSongs = allSongs.reduce((sum, b) => sum + b.songs.length, 0);
                    setProcessingStatus(`âœ“ Successfully collected ${totalSongs} songs from ${allSongs.filter(b => b.songs.length > 0).length} bands!`);
                    
                    // If Spotify is connected, automatically create playlist
                    if (spotifyAccessToken && spotifyUserId && totalSongs > 0) {
                        await createSpotifyPlaylist(allSongs.filter(b => b.songs.length > 0));
                    }
                    
                } catch (error) {
                    console.error('Error generating playlist:', error);
                    setProcessingStatus(`Error: ${error.message}`);
                } finally {
                    setIsGenerating(false);
                }
            };

            const createSpotifyPlaylist = async (bandSongs) => {
                setProcessingStatus('Creating Spotify playlist...');
                
                try {
                    const createPlaylistResponse = await fetch(`https://api.spotify.com/v1/users/${spotifyUserId}/playlists`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${spotifyAccessToken}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: 'Download Festival 2026 - Top Live Songs',
                            description: `Top 10 most played live songs from ${bandSongs.length} bands at Download Festival 2026`,
                            public: false
                        })
                    });
                    
                    const playlist = await createPlaylistResponse.json();
                    const playlistId = playlist.id;
                    setPlaylistUrl(playlist.external_urls.spotify);
                    
                    setProcessingStatus('Searching for songs on Spotify...');
                    
                    const trackUris = [];
                    for (const {band, songs} of bandSongs) {
                        for (const song of songs) {
                            try {
                                const searchQuery = `track:${song} artist:${band}`;
                                const searchResponse = await fetch(
                                    `https://api.spotify.com/v1/search?q=${encodeURIComponent(searchQuery)}&type=track&limit=1`,
                                    { headers: { 'Authorization': `Bearer ${spotifyAccessToken}` } }
                                );
                                
                                const searchData = await searchResponse.json();
                                if (searchData.tracks.items.length > 0) {
                                    trackUris.push(searchData.tracks.items[0].uri);
                                }
                                
                                await new Promise(resolve => setTimeout(resolve, 100));
                            } catch (error) {
                                console.error(`Error finding ${band} - ${song}:`, error);
                            }
                        }
                    }
                    
                    setProcessingStatus(`Found ${trackUris.length} songs on Spotify. Adding to playlist...`);
                    
                    for (let i = 0; i < trackUris.length; i += 100) {
                        const batch = trackUris.slice(i, i + 100);
                        await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${spotifyAccessToken}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ uris: batch })
                        });
                    }
                    
                    setProcessingStatus(`âœ“ Playlist created successfully! Added ${trackUris.length} songs.`);
                    
                } catch (error) {
                    console.error('Error creating Spotify playlist:', error);
                    setProcessingStatus(`Error creating Spotify playlist: ${error.message}`);
                }
            };


            const HeadlinerLogo = ({ name, selected }) => {
                let style = {};
                
                if (name === 'Limp Bizkit') {
                    style = {
                        fontFamily: '"Impact", "Arial Black", sans-serif',
                        fontSize: '4rem',
                        letterSpacing: '0.05em',
                        transform: 'scaleY(1.1)',
                        fontWeight: '900'
                    };
                } else if (name === 'Guns N\' Roses') {
                    style = {
                        fontFamily: '"Trebuchet MS", sans-serif',
                        fontSize: '4.5rem',
                        letterSpacing: '0.1em',
                        fontWeight: '900'
                    };
                } else if (name === 'Linkin Park') {
                    style = {
                        fontFamily: '"Arial Black", sans-serif',
                        fontSize: '4rem',
                        letterSpacing: '0.15em',
                        fontWeight: '900',
                        textTransform: 'uppercase'
                    };
                }
                
                return (
                    <button
                        onClick={() => toggleBand(name)}
                        className={`px-4 py-2 m-2 transition-all duration-200 transform hover:scale-105 ${
                            selected
                                ? 'text-orange-400 bg-red-900/50 shadow-lg shadow-orange-500/50 border-2 border-orange-500'
                                : 'text-white hover:text-orange-300'
                        }`}
                        style={{
                            ...style,
                            textShadow: selected 
                                ? '0 0 20px rgba(251, 146, 60, 0.9), 0 0 40px rgba(251, 146, 60, 0.5), 3px 3px 6px rgba(0,0,0,0.8)' 
                                : '3px 3px 6px rgba(0,0,0,0.9), 0 0 10px rgba(0,0,0,0.5)',
                        }}
                    >
                        {name.toUpperCase()}
                    </button>
                );
            };

            const MainStageLogo = ({ name, selected }) => {
                let style = {
                    fontFamily: '"Impact", "Arial Black", sans-serif',
                    letterSpacing: '0.08em',
                    fontWeight: '900'
                };
                
                if (name === 'Bad Omens' || name === 'Architects' || name === 'Trivium') {
                    style.letterSpacing = '0.12em';
                } else if (name === 'Ice Nine Kills' || name === 'Babymetal') {
                    style.fontFamily = '"Arial Black", sans-serif';
                    style.letterSpacing = '0.1em';
                } else if (name === 'The Pretty Reckless' || name === 'Behemoth') {
                    style.fontFamily = '"Trebuchet MS", sans-serif';
                    style.letterSpacing = '0.15em';
                }
                
                return (
                    <button
                        onClick={() => toggleBand(name)}
                        className={`text-xl md:text-2xl px-3 py-1 m-1 transition-all duration-200 transform hover:scale-105 ${
                            selected
                                ? 'text-orange-400 bg-red-900/50 shadow-lg shadow-orange-500/50 border-2 border-orange-500'
                                : 'text-white hover:text-orange-300'
                        }`}
                        style={{
                            ...style,
                            textShadow: selected 
                                ? '0 0 15px rgba(251, 146, 60, 0.8), 0 0 30px rgba(251, 146, 60, 0.4), 2px 2px 4px rgba(0,0,0,0.8)' 
                                : '2px 2px 4px rgba(0,0,0,0.9)',
                            textTransform: 'uppercase'
                        }}
                    >
                        {name}
                    </button>
                );
            };

            const BandName = ({ name, size = 'text-base', selected }) => (
                <button
                    onClick={() => toggleBand(name)}
                    className={`${size} font-bold uppercase tracking-wider px-2 py-1 m-1 transition-all duration-200 transform hover:scale-105 ${
                        selected
                            ? 'text-orange-400 bg-red-900/50 shadow-lg shadow-orange-500/50 border-2 border-orange-500'
                            : 'text-white hover:text-orange-300'
                    }`}
                    style={{
                        textShadow: selected ? '0 0 10px rgba(251, 146, 60, 0.8), 0 0 20px rgba(251, 146, 60, 0.4), 1px 1px 3px rgba(0,0,0,0.9)' : '1px 1px 3px rgba(0,0,0,0.9)',
                        fontFamily: '"Arial", "Helvetica", sans-serif',
                        fontWeight: '700'
                    }}
                >
                    {name}
                </button>
            );

            return (
                <div className="min-h-screen w-full relative overflow-hidden" style={{ backgroundColor: '#000000' }}>
                    {/* Background gradient */}
                    <div 
                        className="absolute inset-0"
                        style={{
                            background: 'linear-gradient(to bottom, #B30000 0%, #8B0000 20%, #660000 35%, #330000 50%, #1a0000 65%, #000000 80%)'
                        }}
                    ></div>
                    
                    {/* Subtle texture */}
                    <div 
                        className="absolute inset-0 opacity-20"
                        style={{
                            backgroundImage: 'repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px)'
                        }}
                    ></div>

                    <div className="relative z-10 p-8">
                        {/* Spotify Setup Section - Always Visible */}
                        <div className="max-w-4xl mx-auto mb-8 bg-gray-900/90 border-2 border-green-500 rounded-lg p-6">
                            <h3 className="text-xl font-bold text-green-400 mb-3">ðŸŽµ Spotify Configuration</h3>
                            
                            {!spotifyClientId ? (
                                <div>
                                    <p className="text-white text-sm mb-3">
                                        To create playlists, you need to set up Spotify:
                                    </p>
                                    <ol className="text-gray-300 text-sm space-y-1 list-decimal list-inside mb-4">
                                        <li>Go to <a href="https://developer.spotify.com/dashboard" target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:text-blue-300 underline">Spotify Developer Dashboard</a></li>
                                        <li>Create an app with Redirect URI: <code className="bg-gray-800 px-2 py-1 rounded text-xs">{SPOTIFY_REDIRECT_URI}</code></li>
                                        <li>Copy your Client ID and paste below:</li>
                                    </ol>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={spotifyClientId}
                                            onChange={(e) => setSpotifyClientId(e.target.value)}
                                            placeholder="Paste Spotify Client ID here..."
                                            className="flex-1 px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded focus:border-green-500 focus:outline-none"
                                        />
                                        <button
                                            onClick={() => {
                                                if (spotifyClientId && spotifyClientId.trim() !== '') {
                                                    saveSpotifyClientId(spotifyClientId);
                                                } else {
                                                    alert('Please enter your Client ID!');
                                                }
                                            }}
                                            className="px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded font-bold whitespace-nowrap"
                                        >
                                            Save
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div>
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-green-300 font-bold">âœ“ Spotify Configured</p>
                                            <p className="text-gray-400 text-xs">Client ID: {spotifyClientId.substring(0, 20)}...</p>
                                        </div>
                                        <div className="flex gap-2">
                                            {!spotifyAccessToken ? (
                                                <button
                                                    onClick={connectSpotify}
                                                    className="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded font-bold"
                                                >
                                                    Connect Spotify
                                                </button>
                                            ) : (
                                                <span className="text-green-300 font-bold">âœ“ Spotify Connected</span>
                                            )}
                                            <button
                                                onClick={() => {
                                                    setSpotifyClientId('');
                                                    localStorage.removeItem('spotifyClientId');
                                                    setSpotifyAccessToken(null);
                                                }}
                                                className="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm"
                                            >
                                                Change
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Header */}
                        <div className="text-center mb-8">
                            <div 
                                className="text-6xl font-black mb-4 tracking-wider"
                                style={{
                                    background: 'linear-gradient(to bottom, #ffffff, #fb923c)',
                                    WebkitBackgroundClip: 'text',
                                    WebkitTextFillColor: 'transparent',
                                    textShadow: '0 0 20px rgba(251, 146, 60, 0.5)',
                                    fontFamily: '"Impact", "Arial Black", sans-serif'
                                }}
                            >
                                DOWNLOAD XXIII
                            </div>
                            <div className="text-orange-500 text-2xl font-bold tracking-widest mb-2">
                                ALL HEADLINERS UK EXCLUSIVES
                            </div>
                            <div className="text-white text-sm">Click bands to add them to your playlist</div>
                            <div className="text-orange-400 text-sm mt-1">Selected: {selectedBands.size} bands</div>
                        </div>

                        {/* Headliners */}
                        <div className="flex justify-center items-center gap-8 mb-8 flex-wrap">
                            {headliners.map(band => (
                                <HeadlinerLogo 
                                    key={band} 
                                    name={band}
                                    selected={selectedBands.has(band)}
                                />
                            ))}
                        </div>

                        {/* Main Stage */}
                        <div className="border-t-4 border-b-4 border-orange-600 py-6 mb-6">
                            <div className="flex justify-center items-center flex-wrap gap-2">
                                {mainStage.map(band => (
                                    <MainStageLogo 
                                        key={band} 
                                        name={band}
                                        selected={selectedBands.has(band)}
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Mid Tier */}
                        <div className="border-t-2 border-b-2 border-red-800 py-4 mb-4 bg-black/30">
                            <div className="flex justify-center items-center flex-wrap gap-1">
                                {midTier.map(band => (
                                    <BandName 
                                        key={band} 
                                        name={band} 
                                        size="text-base md:text-lg" 
                                        selected={selectedBands.has(band)}
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Smaller Bands */}
                        <div className="py-4 bg-black/40 rounded-lg">
                            <div className="flex justify-center items-center flex-wrap gap-1 text-xs md:text-sm">
                                {smallerBands.map(band => (
                                    <BandName 
                                        key={band} 
                                        name={band} 
                                        size="text-xs md:text-sm" 
                                        selected={selectedBands.has(band)}
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="text-center mt-8">
                            <div className="text-orange-500 text-sm font-bold mb-2">PLUS MORE TO BE ANNOUNCED</div>
                            <div className="text-white text-3xl font-black tracking-wider mb-6">
                                DONINGTON PARK 10-14 JUNE 2026
                            </div>
                            
                            <button
                                onClick={generatePlaylist}
                                disabled={isGenerating || selectedBands.size === 0}
                                className={`px-8 py-4 text-xl font-bold uppercase tracking-wider rounded-lg transform transition-all duration-200 ${
                                    selectedBands.size === 0
                                        ? 'bg-gray-600 text-gray-400 cursor-not-allowed'
                                        : 'bg-gradient-to-r from-orange-600 to-red-700 text-white hover:scale-105 hover:shadow-2xl hover:shadow-orange-500/50'
                                }`}
                            >
                                {isGenerating ? 'Generating...' : `Create Playlist (${selectedBands.size} bands)`}
                            </button>
                        </div>

                        {/* Progress Panel */}
                        {showInstructions && (
                            <div className="mt-8 bg-black/80 border-2 border-orange-500 rounded-lg p-6 max-w-4xl mx-auto">
                                <h3 className="text-2xl font-bold text-orange-400 mb-4">
                                    {isGenerating ? 'Fetching Top Songs...' : 'Songs Collected!'}
                                </h3>
                                
                                {!spotifyAccessToken ? (
                                    <div className="bg-green-900/30 border border-green-500 p-4 rounded mb-4">
                                        <p className="text-white mb-2">
                                            <strong>âš  Spotify Not Connected</strong>
                                        </p>
                                        <p className="text-gray-300 text-sm mb-3">
                                            Connect your Spotify account to automatically create a playlist.
                                        </p>
                                        <button
                                            onClick={connectSpotify}
                                            className="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded font-bold"
                                        >
                                            Connect Spotify
                                        </button>
                                    </div>
                                ) : (
                                    <div className="bg-green-900/30 border border-green-500 p-3 rounded mb-4">
                                        <p className="text-green-300 font-bold">âœ“ Spotify Connected</p>
                                    </div>
                                )}
                                
                                {processingStatus && (
                                    <div className="bg-red-900/30 p-3 rounded mb-4 text-white">
                                        {processingStatus}
                                    </div>
                                )}
                                
                                {playlistUrl && (
                                    <div className="bg-green-900/40 border-2 border-green-400 p-4 rounded mb-4">
                                        <p className="text-green-300 font-bold text-lg mb-2">
                                            ðŸŽ‰ Playlist Created Successfully!
                                        </p>
                                        <a 
                                            href={playlistUrl}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="text-blue-300 hover:text-blue-200 underline text-lg font-bold"
                                        >
                                            Open Playlist in Spotify â†’
                                        </a>
                                    </div>
                                )}
                                
                                {isGenerating && (
                                    <div className="flex justify-center mb-4">
                                        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"></div>
                                    </div>
                                )}
                                
                                {collectedSongs.length > 0 && (
                                    <div className="space-y-4 mb-6 max-h-96 overflow-y-auto">
                                        {collectedSongs.map(({band, songs, error}) => (
                                            <div key={band} className="bg-red-900/30 p-4 rounded">
                                                <div className="text-orange-300 font-bold mb-2 text-lg">{band}</div>
                                                {error ? (
                                                    <div className="text-red-400 text-sm">Error: {error}</div>
                                                ) : songs.length > 0 ? (
                                                    <ol className="text-white text-sm space-y-1 list-decimal list-inside">
                                                        {songs.map((song, idx) => (
                                                            <li key={idx}>{song}</li>
                                                        ))}
                                                    </ol>
                                                ) : (
                                                    <div className="text-gray-400 text-sm">No songs found</div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                                
                                {!isGenerating && collectedSongs.length > 0 && (
                                    <div className="bg-orange-900/20 p-4 rounded mb-4">
                                        <p className="text-white font-bold mb-2">
                                            Total songs: {collectedSongs.reduce((sum, b) => sum + b.songs.length, 0)}
                                        </p>
                                    </div>
                                )}
                                
                                <div className="flex gap-3">
                                    <button
                                        onClick={() => {
                                            setShowInstructions(false);
                                            setCollectedSongs([]);
                                            setProcessingStatus('');
                                            setPlaylistUrl(null);
                                        }}
                                        className="px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-bold"
                                    >
                                        Close
                                    </button>
                                    
                                    {!isGenerating && collectedSongs.length > 0 && (
                                        <button
                                            onClick={() => {
                                                const allSongs = collectedSongs.flatMap(b => 
                                                    b.songs.map(song => `${b.band} - ${song}`)
                                                ).join('\n');
                                                navigator.clipboard.writeText(allSongs);
                                                alert('Song list copied to clipboard!');
                                            }}
                                            className="px-6 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded font-bold"
                                        >
                                            Copy All Songs
                                        </button>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<DownloadFestivalSelector />, document.getElementById('root'));
    </script>
</body>
</html>
